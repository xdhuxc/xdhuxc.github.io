<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Ansible 学习之常用模块 - xdhuxc</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="xdhuxc" /><meta name="description" content="本篇博客详细介绍了 Ansible 常用模块的用法。
" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.68.3 with theme even" />


<link rel="canonical" href="https://xdhuxc.github.io/post/devops/ansible/ansible-common-model/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Ansible 学习之常用模块" />
<meta property="og:description" content="本篇博客详细介绍了 Ansible 常用模块的用法。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xdhuxc.github.io/post/devops/ansible/ansible-common-model/" />
<meta property="article:published_time" content="2018-05-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-05-02T00:00:00+00:00" />
<meta itemprop="name" content="Ansible 学习之常用模块">
<meta itemprop="description" content="本篇博客详细介绍了 Ansible 常用模块的用法。">
<meta itemprop="datePublished" content="2018-05-02T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-05-02T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="3817">



<meta itemprop="keywords" content="Ansible,DevOps," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ansible 学习之常用模块"/>
<meta name="twitter:description" content="本篇博客详细介绍了 Ansible 常用模块的用法。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Xdhuxc</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">博客</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">目录</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Xdhuxc</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">博客</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">目录</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Ansible 学习之常用模块</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-05-02 </span>
        <div class="post-category">
            <a href="/categories/%E6%8A%80%E6%9C%AF/"> 技术 </a>
            </div>
          <span class="more-meta"> 约 3817 字 </span>
          <span class="more-meta"> 预计阅读 8 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#模块相关命令">模块相关命令</a></li>
        <li><a href="#常用模块示例">常用模块示例</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>本篇博客详细介绍了 Ansible 常用模块的用法。</p>
<h3 id="模块相关命令">模块相关命令</h3>
<p>（1）列出 ansible 支持的模块</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible-doc -l
</code></pre></td></tr></table>
</div>
</div><p>（2）查看该模块的帮助信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible-doc ping # 查看 ping 模块的帮助信息
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>以下实验均是在 IP 地址为： 192.168.91.128 的虚拟机上操作的。
/etc/ansible/hosts 文件中配置如下：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># This is the default ansible &#39;hosts&#39; file.
#
# It should live in /etc/ansible/hosts
#
#   - Comments begin with the &#39;#&#39; character
#   - Blank lines are ignored
#   - Groups of hosts are delimited by [header] elements
#   - You can enter hostnames or ip addresses
#   - A hostname/ip can be a member of multiple groups

# Ex 1: Ungrouped hosts, specify before any group headers.

## green.example.com
## blue.example.com
## 192.168.100.1
## 192.168.100.10
[Client]
192.168.91.130

# Ex 2: A collection of hosts belonging to the &#39;webservers&#39; group

## [webservers]
## alpha.example.org
## beta.example.org
## 192.168.1.100
## 192.168.1.110

# If you have multiple hosts following a pattern you can specify
# them like this:

## www[001:006].example.com

# Ex 3: A collection of database servers in the &#39;dbservers&#39; group

## [dbservers]
##
## db01.intranet.mydomain.net
## db02.intranet.mydomain.net
## 10.25.1.56
## 10.25.1.57

# Here&#39;s another example of host ranges, this time there are no
# leading 0s:

## db-[99:101]-node.example.com

</code></pre></td></tr></table>
</div>
</div><h3 id="常用模块示例">常用模块示例</h3>
<h4 id="ping-模块">ping 模块</h4>
<p>检查指定节点机器能否连通，如果主机在线，则回复pong。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m ping
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: false,
    &#34;ping&#34;: &#34;pong&#34;
}
[root@xdhuxc ~]#
</code></pre></td></tr></table>
</div>
</div><h5 id="远程命令模块commandscriptshell">远程命令模块（command、script、shell）</h5>
<p>command 作为 ansible 的默认模块，可以运行远程权限范围所有的 shell 命令，不支持管道符。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m command -a &#34;free -h&#34; # 查看 Client 分组主机内存使用情况。
</code></pre></td></tr></table>
</div>
</div><p>执行结果为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m command -a &#34;free -h&#34;
192.168.91.130 | SUCCESS | rc=0 &gt;&gt;
              total        used        free      shared  buff/cache   available
Mem:           976M        153M        599M        6.7M        223M        638M
Swap:          2.0G          0B        2.0G

</code></pre></td></tr></table>
</div>
</div><p>script 的功能是在远程主机执行主控端存储的 shell 脚本文件，相当于 scp + shell 组合。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m script -a &#34;/root/xdhuxc.sh string buffer&#34;   # 远程执行本地脚本。
</code></pre></td></tr></table>
</div>
</div><p>xdhuxc.sh 脚本的内容为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@xdhuxc ~<span class="o">]</span><span class="c1"># pwd</span>
/root
<span class="o">[</span>root@xdhuxc ~<span class="o">]</span><span class="c1"># ls</span>
xdhuxc.sh
<span class="o">[</span>root@xdhuxc ~<span class="o">]</span><span class="c1"># cat xdhuxc.sh</span>
<span class="c1">#!/usr/bin/env bash</span>
<span class="nb">echo</span> <span class="s2">&#34;Hello Shell.&#34;</span>
<span class="nb">echo</span> <span class="nv">$1</span>
<span class="nb">echo</span> <span class="nv">$2</span> &gt;&gt; /root/abc.sh
</code></pre></td></tr></table>
</div>
</div><p>执行结果为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m script -a &#34;/root/xdhuxc.sh string buffer&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;rc&#34;: 0,
    &#34;stderr&#34;: &#34;Shared connection to 192.168.91.130 closed.\r\n&#34;,
    &#34;stdout&#34;: &#34;Hello Shell.\r\nstring\r\n&#34;,
    &#34;stdout_lines&#34;: [
        &#34;Hello Shell.&#34;,
        &#34;string&#34;
    ]
}
</code></pre></td></tr></table>
</div>
</div><p>在 192.168.91.130上，在 root 目录下，会产生 abc.sh 文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# pwd
/root
[root@xdhuxc ~]# ls
abc.sh  anaconda-ks.cfg  ~None
[root@xdhuxc ~]# cat abc.sh
buffer
[root@xdhuxc ~]#
</code></pre></td></tr></table>
</div>
</div><p>~None 目录下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~None]# pwd
/root/~None
[root@xdhuxc ~None]# tree -a
.
└── .ansible
    └── tmp

2 directories, 0 files
</code></pre></td></tr></table>
</div>
</div><p>shell 的功能是执行远程主机上的 shell 脚本文件，支持管道符。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m shell -a &#34;/root/xdhuxc.sh&#34; # 执行远程机器上的脚本。
</code></pre></td></tr></table>
</div>
</div><p>在 root 目录下创建 xdhuxc.sh 文件，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@xdhuxc ~<span class="o">]</span><span class="c1"># pwd</span>
/root
<span class="o">[</span>root@xdhuxc ~<span class="o">]</span><span class="c1"># ll</span>
total <span class="m">12</span>
-rw-r--r--  <span class="m">1</span> root root    <span class="m">7</span> Jun <span class="m">11</span> 22:19 abc.sh
-rw-------. <span class="m">1</span> root root <span class="m">1424</span> Apr  <span class="m">9</span> 21:56 anaconda-ks.cfg
drwx------  <span class="m">3</span> root root   <span class="m">22</span> Jun <span class="m">10</span> 11:55 ~None
-rw-r--r--  <span class="m">1</span> root root   <span class="m">43</span> Jun <span class="m">11</span> 22:34 xdhuxc.sh   <span class="c1"># xdhuxc.sh 没有执行权限。</span>
<span class="o">[</span>root@xdhuxc ~<span class="o">]</span><span class="c1"># cat xdhuxc.sh</span>
<span class="c1">#!/usr/bin/env bash</span>
<span class="nb">echo</span> -n <span class="s2">&#34;Hello World!&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>在 xdhuxc.sh 没有被赋予执行权限时，执行 ansible 命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m shell -a &#34;/root/xdhuxc.sh&#34;
192.168.91.130 | FAILED | rc=126 &gt;&gt;
/bin/sh: /root/xdhuxc.sh: Permission deniednon-zero return code

</code></pre></td></tr></table>
</div>
</div><p>很明显，xdhuxc.sh 没有可执行权限导致的，修改该命令，重新执行，命令执行成功。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m shell -a &#34;chmod +x /root/xdhuxc.sh ; /root/xdhuxc.sh&#34;
 [WARNING]: Consider using the file module with mode rather than running chmod.  If you need to use command because
file is insufficient you can add warn=False to this command task or set command_warnings=False in ansible.cfg to
get rid of this message.

192.168.91.130 | SUCCESS | rc=0 &gt;&gt;
Hello World!

</code></pre></td></tr></table>
</div>
</div><h5 id="copy-模块">copy 模块</h5>
<p>copy 模块用于实现主控端向目标机器复制文件，类似于 scp 功能。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m copy -a &#34;src=/root/xdhuxc.sh dest=/tmp/ owner=root group=root mode=0755&#34; # 向 Client 组中主机复制 xdhuxc.sh 到 /tmp 目录下，文件属主、属组都为 root，权限为：0755
</code></pre></td></tr></table>
</div>
</div><p>执行结果如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# pwd
/root
[root@xdhuxc ~]# ls
xdhuxc.sh
[root@xdhuxc ~]# ansible Client -m copy -a &#34;src=/root/xdhuxc.sh dest=/tmp/ owner=root group=root mode=0755&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;checksum&#34;: &#34;406eb4b32e5fe321308cfd40365f765685d64d58&#34;,
    &#34;dest&#34;: &#34;/tmp/xdhuxc.sh&#34;,
    &#34;gid&#34;: 0,
    &#34;group&#34;: &#34;root&#34;,
    &#34;md5sum&#34;: &#34;1abf4cb799e8858ab96bb7035837f248&#34;,
    &#34;mode&#34;: &#34;0755&#34;,
    &#34;owner&#34;: &#34;root&#34;,
    &#34;size&#34;: 72,
    &#34;src&#34;: &#34;~None/.ansible/tmp/ansible-tmp-1528728245.0-152168028566440/source&#34;,
    &#34;state&#34;: &#34;file&#34;,
    &#34;uid&#34;: 0
}
</code></pre></td></tr></table>
</div>
</div><p>在 192.168.91.130 机器上</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~None]# pwd
/root/~None
[root@xdhuxc ~None]# tree -a
.
└── .ansible
    └── tmp
        └── ansible-tmp-1528728229.03-131422320501562

3 directories, 0 files
[root@xdhuxc ~None]# ls /tmp
xdhuxc.sh
</code></pre></td></tr></table>
</div>
</div><h5 id="stat-模块">stat 模块</h5>
<p>stat 模块用于获取远程文件状态信息，atime/ctime/mtime/md5/uid/gid等信息。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m stat -a &#34;path=/etc/sysctl.conf&#34;
</code></pre></td></tr></table>
</div>
</div><p>执行结果如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m stat -a &#34;path=/etc/resolv.conf&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: false,
    &#34;stat&#34;: {
        &#34;atime&#34;: 1528725838.9349997,
        &#34;attr_flags&#34;: &#34;&#34;,
        &#34;attributes&#34;: [],
        &#34;block_size&#34;: 4096,
        &#34;blocks&#34;: 8,
        &#34;charset&#34;: &#34;us-ascii&#34;,
        &#34;checksum&#34;: &#34;dfebfbbbb5ea787130ffb53eaab925c743f50a56&#34;,
        &#34;ctime&#34;: 1528725836.281,
        &#34;dev&#34;: 64768,
        &#34;device_type&#34;: 0,
        &#34;executable&#34;: false,
        &#34;exists&#34;: true,
        &#34;gid&#34;: 0,
        &#34;gr_name&#34;: &#34;root&#34;,
        &#34;inode&#34;: 17073255,
        &#34;isblk&#34;: false,
        &#34;ischr&#34;: false,
        &#34;isdir&#34;: false,
        &#34;isfifo&#34;: false,
        &#34;isgid&#34;: false,
        &#34;islnk&#34;: false,
        &#34;isreg&#34;: true,
        &#34;issock&#34;: false,
        &#34;isuid&#34;: false,
        &#34;mimetype&#34;: &#34;text/plain&#34;,
        &#34;mode&#34;: &#34;0644&#34;,
        &#34;mtime&#34;: 1528725836.281,
        &#34;nlink&#34;: 1,
        &#34;path&#34;: &#34;/etc/resolv.conf&#34;,
        &#34;pw_name&#34;: &#34;root&#34;,
        &#34;readable&#34;: true,
        &#34;rgrp&#34;: true,
        &#34;roth&#34;: true,
        &#34;rusr&#34;: true,
        &#34;size&#34;: 73,
        &#34;uid&#34;: 0,
        &#34;version&#34;: &#34;1617439728&#34;,
        &#34;wgrp&#34;: false,
        &#34;woth&#34;: false,
        &#34;writeable&#34;: true,
        &#34;wusr&#34;: true,
        &#34;xgrp&#34;: false,
        &#34;xoth&#34;: false,
        &#34;xusr&#34;: false
    }
}
</code></pre></td></tr></table>
</div>
</div><p>显示了 /etc/sysctl.conf 文件的所有状态信息。</p>
<h5 id="get_url-模块">get_url 模块</h5>
<p>get_url 模块可以实现从远程主机下载指定 URL 到本地，支持 sha256sum 文件教验。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m get_url -a &#34;url=http://www.baidu.com dest=/tmp/index.html mode=0440 force=yes&#34;
</code></pre></td></tr></table>
</div>
</div><p>执行命令的结果为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m get_url -a &#34;url=http://www.baidu.com dest=/tmp/index.html mode=0440 force=yes&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;checksum_dest&#34;: &#34;69676fdd06a44063439b46a7df1e326eeae98ed4&#34;,
    &#34;checksum_src&#34;: &#34;063ec2b31e5fa4d889076b948994ed4934d8ad62&#34;,
    &#34;dest&#34;: &#34;/tmp/index.html&#34;,
    &#34;gid&#34;: 0,
    &#34;group&#34;: &#34;root&#34;,
    &#34;md5sum&#34;: &#34;b4715e7fb51d60a983e29f3dc6d7a51a&#34;,
    &#34;mode&#34;: &#34;0440&#34;,
    &#34;msg&#34;: &#34;OK (unknown bytes)&#34;,
    &#34;owner&#34;: &#34;root&#34;,
    &#34;size&#34;: 117044,
    &#34;src&#34;: &#34;/tmp/tmpXgrOKe&#34;,
    &#34;state&#34;: &#34;file&#34;,
    &#34;status_code&#34;: 200,
    &#34;uid&#34;: 0,
    &#34;url&#34;: &#34;http://www.baidu.com&#34;
}
[root@xdhuxc ~]# ansible Client -m command -a &#34;ls /tmp&#34;
192.168.91.130 | SUCCESS | rc=0 &gt;&gt;
ansible_EsBCHn
index.html                              # 下载下来的文件
</code></pre></td></tr></table>
</div>
</div><h5 id="yum-模块">yum 模块</h5>
<p>yum 模块用于实现软件包管理。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m yum -a &#34;name=curl state=latest&#34;
</code></pre></td></tr></table>
</div>
</div><p>命令执行的结果为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m yum -a &#34;name=curl state=latest&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;msg&#34;: &#34;Repository base is listed more than once in the configuration\nRepository updates is listed more than once in the configuration\nRepository extras is listed more than once in the configuration\nRepository centosplus is listed more than once in the configuration\nRepository base is listed more than once in the configuration\nRepository updates is listed more than once in the configuration\nRepository extras is listed more than once in the configuration\nRepository centosplus is listed more than once in the configuration\nRepository base is listed more than once in the configuration\nRepository updates is listed more than once in the configuration\nRepository extras is listed more than once in the configuration\nRepository centosplus is listed more than once in the configuration\nRepository base is listed more than once in the configuration\nRepository updates is listed more than once in the configuration\nRepository extras is listed more than once in the configuration\nRepository centosplus is listed more than once in the configuration\nRepository epel is listed more than once in the configuration\nRepository epel-debuginfo is listed more than once in the configuration\nRepository epel-source is listed more than once in the configuration\nhttps://mirrors.aliyun.com/centos/7.4.1708/virt/x86_64/kubernetes19/repodata/repomd.xml: [Errno 14] HTTPS Error 404 - Not Found\nTrying other mirror.\nTo address this issue please refer to the below knowledge base article \n\nhttps://access.redhat.com/articles/1320623\n\nIf above article doesn&#39;t help to resolve this issue please create a bug on https://bugs.centos.org/\n\n&#34;,
    &#34;rc&#34;: 0,
    &#34;results&#34;: [
        &#34;Loaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * epel: mirrors.aliyun.com\nResolving Dependencies\n--&gt; Running transaction check\n---&gt; Package curl.x86_64 0:7.29.0-42.el7 will be updated\n---&gt; Package curl.x86_64 0:7.29.0-46.el7 will be an update\n--&gt; Processing Dependency: libcurl = 7.29.0-46.el7 for package: curl-7.29.0-46.el7.x86_64\n--&gt; Running transaction check\n---&gt; Package libcurl.x86_64 0:7.29.0-42.el7 will be updated\n---&gt; Package libcurl.x86_64 0:7.29.0-46.el7 will be an update\n--&gt; Finished Dependency Resolution\n\nDependencies Resolved\n\n================================================================================\n Package          Arch            Version                   Repository     Size\n================================================================================\nUpdating:\n curl             x86_64          7.29.0-46.el7             base          268 k\nUpdating for dependencies:\n libcurl          x86_64          7.29.0-46.el7             base          220 k\n\nTransaction Summary\n================================================================================\nUpgrade  1 Package (+1 Dependent package)\n\nTotal download size: 488 k\nDownloading packages:\nDelta RPMs disabled because /usr/bin/applydeltarpm not installed.\n--------------------------------------------------------------------------------\nTotal                                              960 kB/s | 488 kB  00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Updating   : libcurl-7.29.0-46.el7.x86_64                                 1/4 \n  Updating   : curl-7.29.0-46.el7.x86_64                                    2/4 \n  Cleanup    : curl-7.29.0-42.el7.x86_64                                    3/4 \n  Cleanup    : libcurl-7.29.0-42.el7.x86_64                                 4/4 \n  Verifying  : curl-7.29.0-46.el7.x86_64                                    1/4 \n  Verifying  : libcurl-7.29.0-46.el7.x86_64                                 2/4 \n  Verifying  : libcurl-7.29.0-42.el7.x86_64                                 3/4 \n  Verifying  : curl-7.29.0-42.el7.x86_64                                    4/4 \n\nUpdated:\n  curl.x86_64 0:7.29.0-46.el7                                                   \n\nDependency Updated:\n  libcurl.x86_64 0:7.29.0-46.el7                                                \n\nComplete!\n&#34;
    ]
}
[root@xdhuxc ~]# ansible Client -m yum -a &#34;name=curl state=latest&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: false,
    &#34;msg&#34;: &#34;&#34;,
    &#34;rc&#34;: 0,
    &#34;results&#34;: [
        &#34;All packages providing curl are up to date&#34;,
        &#34;&#34;
    ]
}
</code></pre></td></tr></table>
</div>
</div><p>从 msg 和 results 输出的信息可以看到，这就是一个 yum 安装软件包的过程。</p>
<h5 id="cron-模块">cron 模块</h5>
<p>cron 模块用于配置远程主机 crontab
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m cron -a &#34;name=&#39;check&#39; minute=&#39;1&#39; job=&#39;ntpdate asia.pool.ntp.org&#39;&#34;
</code></pre></td></tr></table>
</div>
</div><p>运行效果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# ansible Client -m cron -a &#34;name=&#39;check&#39; minute=&#39;1&#39; job=&#39;ntpdate asia.pool.ntp.org&#39;&#34;
192.168.91.130 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;envs&#34;: [],
    &#34;jobs&#34;: [
        &#34;check&#34;
    ]
}
[root@xdhuxc ~]# ansible Client -m command -a &#34;crontab -l&#34;
192.168.91.130 | SUCCESS | rc=0 &gt;&gt;
#Ansible: check
1 * * * * ntpdate asia.pool.ntp.org

[root@xdhuxc ~]#
</code></pre></td></tr></table>
</div>
</div><h5 id="service-模块">service 模块</h5>
<p>service 模块可以用来管理远程主机的系统服务。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m service -a &#34;name=haproxy state=stopped&#34;
ansible Client -m service -a &#34;name=haproxy state=restarted&#34;
ansible Client -m service -a &#34;name=haproxy state=reloaded&#34;
</code></pre></td></tr></table>
</div>
</div><p>命令执行的结果为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# systemctl status haproxy
● haproxy.service - HAProxy Load Balancer
   Loaded: loaded (/usr/lib/systemd/system/haproxy.service; disabled; vendor preset: disabled)
   Active: active (running) since Mon 2018-06-11 23:17:21 CST; 2s ago
 Main PID: 2135 (haproxy-systemd)
   Memory: 1.9M
   CGroup: /system.slice/haproxy.service
           ├─2135 /usr/sbin/haproxy-systemd-wrapper -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid
           ├─2136 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds
           └─2137 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds

Jun 11 23:17:21 xdhuxc systemd[1]: Started HAProxy Load Balancer.
Jun 11 23:17:21 xdhuxc systemd[1]: Starting HAProxy Load Balancer...
Jun 11 23:17:21 xdhuxc haproxy-systemd-wrapper[2135]: haproxy-systemd-wrapper: executing /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds
[root@xdhuxc ~]# ansible Client -m service -a &#34;name=haproxy state=stopped&#34;
192.168.91.128 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;name&#34;: &#34;haproxy&#34;,
    &#34;state&#34;: &#34;stopped&#34;,
    &#34;status&#34;: {
        &#34;ActiveEnterTimestamp&#34;: &#34;Mon 2018-06-11 23:17:21 CST&#34;,
        &#34;ActiveEnterTimestampMonotonic&#34;: &#34;4444399885&#34;,
        &#34;ActiveExitTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;ActiveState&#34;: &#34;active&#34;,
        &#34;After&#34;: &#34;basic.target system.slice network.target systemd-journald.socket syslog.target&#34;,
        &#34;AllowIsolate&#34;: &#34;no&#34;,
        &#34;AmbientCapabilities&#34;: &#34;0&#34;,
        &#34;AssertResult&#34;: &#34;yes&#34;,
        &#34;AssertTimestamp&#34;: &#34;Mon 2018-06-11 23:17:21 CST&#34;,
        &#34;AssertTimestampMonotonic&#34;: &#34;4444398724&#34;,
        &#34;Before&#34;: &#34;shutdown.target&#34;,
        &#34;BlockIOAccounting&#34;: &#34;no&#34;,
        &#34;BlockIOWeight&#34;: &#34;18446744073709551615&#34;,
        &#34;CPUAccounting&#34;: &#34;no&#34;,
        &#34;CPUQuotaPerSecUSec&#34;: &#34;infinity&#34;,
        &#34;CPUSchedulingPolicy&#34;: &#34;0&#34;,
        &#34;CPUSchedulingPriority&#34;: &#34;0&#34;,
        &#34;CPUSchedulingResetOnFork&#34;: &#34;no&#34;,
        &#34;CPUShares&#34;: &#34;18446744073709551615&#34;,
        &#34;CanIsolate&#34;: &#34;no&#34;,
        &#34;CanReload&#34;: &#34;yes&#34;,
        &#34;CanStart&#34;: &#34;yes&#34;,
        &#34;CanStop&#34;: &#34;yes&#34;,
        &#34;CapabilityBoundingSet&#34;: &#34;18446744073709551615&#34;,
        &#34;ConditionResult&#34;: &#34;yes&#34;,
        &#34;ConditionTimestamp&#34;: &#34;Mon 2018-06-11 23:17:21 CST&#34;,
        &#34;ConditionTimestampMonotonic&#34;: &#34;4444398724&#34;,
        &#34;Conflicts&#34;: &#34;shutdown.target&#34;,
        &#34;ControlGroup&#34;: &#34;/system.slice/haproxy.service&#34;,
        &#34;ControlPID&#34;: &#34;0&#34;,
        &#34;DefaultDependencies&#34;: &#34;yes&#34;,
        &#34;Delegate&#34;: &#34;no&#34;,
        &#34;Description&#34;: &#34;HAProxy Load Balancer&#34;,
        &#34;DevicePolicy&#34;: &#34;auto&#34;,
        &#34;EnvironmentFile&#34;: &#34;/etc/sysconfig/haproxy (ignore_errors=no)&#34;,
        &#34;ExecMainCode&#34;: &#34;0&#34;,
        &#34;ExecMainExitTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;ExecMainPID&#34;: &#34;2135&#34;,
        &#34;ExecMainStartTimestamp&#34;: &#34;Mon 2018-06-11 23:17:21 CST&#34;,
        &#34;ExecMainStartTimestampMonotonic&#34;: &#34;4444399843&#34;,
        &#34;ExecMainStatus&#34;: &#34;0&#34;,
        &#34;ExecReload&#34;: &#34;{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }&#34;,
        &#34;ExecStart&#34;: &#34;{ path=/usr/sbin/haproxy-systemd-wrapper ; argv[]=/usr/sbin/haproxy-systemd-wrapper -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid $OPTIONS ; ignore_errors=no ; start_time=[Mon 2018-06-11 23:17:21 CST] ; stop_time=[n/a] ; pid=2135 ; code=(null) ; status=0/0 }&#34;,
        &#34;FailureAction&#34;: &#34;none&#34;,
        &#34;FileDescriptorStoreMax&#34;: &#34;0&#34;,
        &#34;FragmentPath&#34;: &#34;/usr/lib/systemd/system/haproxy.service&#34;,
        &#34;GuessMainPID&#34;: &#34;yes&#34;,
        &#34;IOScheduling&#34;: &#34;0&#34;,
        &#34;Id&#34;: &#34;haproxy.service&#34;,
        &#34;IgnoreOnIsolate&#34;: &#34;no&#34;,
        &#34;IgnoreOnSnapshot&#34;: &#34;no&#34;,
        &#34;IgnoreSIGPIPE&#34;: &#34;yes&#34;,
        &#34;InactiveEnterTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;InactiveExitTimestamp&#34;: &#34;Mon 2018-06-11 23:17:21 CST&#34;,
        &#34;InactiveExitTimestampMonotonic&#34;: &#34;4444399885&#34;,
        &#34;JobTimeoutAction&#34;: &#34;none&#34;,
        &#34;JobTimeoutUSec&#34;: &#34;0&#34;,
        &#34;KillMode&#34;: &#34;mixed&#34;,
        &#34;KillSignal&#34;: &#34;15&#34;,
        &#34;LimitAS&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitCORE&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitCPU&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitDATA&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitFSIZE&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitLOCKS&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitMEMLOCK&#34;: &#34;65536&#34;,
        &#34;LimitMSGQUEUE&#34;: &#34;819200&#34;,
        &#34;LimitNICE&#34;: &#34;0&#34;,
        &#34;LimitNOFILE&#34;: &#34;4096&#34;,
        &#34;LimitNPROC&#34;: &#34;3818&#34;,
        &#34;LimitRSS&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitRTPRIO&#34;: &#34;0&#34;,
        &#34;LimitRTTIME&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitSIGPENDING&#34;: &#34;3818&#34;,
        &#34;LimitSTACK&#34;: &#34;18446744073709551615&#34;,
        &#34;LoadState&#34;: &#34;loaded&#34;,
        &#34;MainPID&#34;: &#34;2135&#34;,
        &#34;MemoryAccounting&#34;: &#34;no&#34;,
        &#34;MemoryCurrent&#34;: &#34;2060288&#34;,
        &#34;MemoryLimit&#34;: &#34;18446744073709551615&#34;,
        &#34;MountFlags&#34;: &#34;0&#34;,
        &#34;Names&#34;: &#34;haproxy.service&#34;,
        &#34;NeedDaemonReload&#34;: &#34;no&#34;,
        &#34;Nice&#34;: &#34;0&#34;,
        &#34;NoNewPrivileges&#34;: &#34;no&#34;,
        &#34;NonBlocking&#34;: &#34;no&#34;,
        &#34;NotifyAccess&#34;: &#34;none&#34;,
        &#34;OOMScoreAdjust&#34;: &#34;0&#34;,
        &#34;OnFailureJobMode&#34;: &#34;replace&#34;,
        &#34;PermissionsStartOnly&#34;: &#34;no&#34;,
        &#34;PrivateDevices&#34;: &#34;no&#34;,
        &#34;PrivateNetwork&#34;: &#34;no&#34;,
        &#34;PrivateTmp&#34;: &#34;no&#34;,
        &#34;ProtectHome&#34;: &#34;no&#34;,
        &#34;ProtectSystem&#34;: &#34;no&#34;,
        &#34;RefuseManualStart&#34;: &#34;no&#34;,
        &#34;RefuseManualStop&#34;: &#34;no&#34;,
        &#34;RemainAfterExit&#34;: &#34;no&#34;,
        &#34;Requires&#34;: &#34;basic.target&#34;,
        &#34;Restart&#34;: &#34;no&#34;,
        &#34;RestartUSec&#34;: &#34;100ms&#34;,
        &#34;Result&#34;: &#34;success&#34;,
        &#34;RootDirectoryStartOnly&#34;: &#34;no&#34;,
        &#34;RuntimeDirectoryMode&#34;: &#34;0755&#34;,
        &#34;SameProcessGroup&#34;: &#34;no&#34;,
        &#34;SecureBits&#34;: &#34;0&#34;,
        &#34;SendSIGHUP&#34;: &#34;no&#34;,
        &#34;SendSIGKILL&#34;: &#34;yes&#34;,
        &#34;Slice&#34;: &#34;system.slice&#34;,
        &#34;StandardError&#34;: &#34;inherit&#34;,
        &#34;StandardInput&#34;: &#34;null&#34;,
        &#34;StandardOutput&#34;: &#34;journal&#34;,
        &#34;StartLimitAction&#34;: &#34;none&#34;,
        &#34;StartLimitBurst&#34;: &#34;5&#34;,
        &#34;StartLimitInterval&#34;: &#34;10000000&#34;,
        &#34;StartupBlockIOWeight&#34;: &#34;18446744073709551615&#34;,
        &#34;StartupCPUShares&#34;: &#34;18446744073709551615&#34;,
        &#34;StatusErrno&#34;: &#34;0&#34;,
        &#34;StopWhenUnneeded&#34;: &#34;no&#34;,
        &#34;SubState&#34;: &#34;running&#34;,
        &#34;SyslogLevelPrefix&#34;: &#34;yes&#34;,
        &#34;SyslogPriority&#34;: &#34;30&#34;,
        &#34;SystemCallErrorNumber&#34;: &#34;0&#34;,
        &#34;TTYReset&#34;: &#34;no&#34;,
        &#34;TTYVHangup&#34;: &#34;no&#34;,
        &#34;TTYVTDisallocate&#34;: &#34;no&#34;,
        &#34;TasksAccounting&#34;: &#34;no&#34;,
        &#34;TasksCurrent&#34;: &#34;18446744073709551615&#34;,
        &#34;TasksMax&#34;: &#34;18446744073709551615&#34;,
        &#34;TimeoutStartUSec&#34;: &#34;1min 30s&#34;,
        &#34;TimeoutStopUSec&#34;: &#34;1min 30s&#34;,
        &#34;TimerSlackNSec&#34;: &#34;50000&#34;,
        &#34;Transient&#34;: &#34;no&#34;,
        &#34;Type&#34;: &#34;simple&#34;,
        &#34;UMask&#34;: &#34;0022&#34;,
        &#34;UnitFilePreset&#34;: &#34;disabled&#34;,
        &#34;UnitFileState&#34;: &#34;disabled&#34;,
        &#34;Wants&#34;: &#34;system.slice&#34;,
        &#34;WatchdogTimestamp&#34;: &#34;Mon 2018-06-11 23:17:21 CST&#34;,
        &#34;WatchdogTimestampMonotonic&#34;: &#34;4444399872&#34;,
        &#34;WatchdogUSec&#34;: &#34;0&#34;
    }
}
[root@xdhuxc ~]# systemctl status haproxy
● haproxy.service - HAProxy Load Balancer
   Loaded: loaded (/usr/lib/systemd/system/haproxy.service; disabled; vendor preset: disabled)
   Active: inactive (dead)

Jun 11 23:17:21 xdhuxc systemd[1]: Started HAProxy Load Balancer.
Jun 11 23:17:21 xdhuxc systemd[1]: Starting HAProxy Load Balancer...
Jun 11 23:17:21 xdhuxc haproxy-systemd-wrapper[2135]: haproxy-systemd-wrapper: executing /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds
Jun 11 23:17:51 xdhuxc systemd[1]: Stopping HAProxy Load Balancer...
Jun 11 23:17:51 xdhuxc haproxy-systemd-wrapper[2135]: haproxy-systemd-wrapper: SIGTERM -&gt; 2137.
Jun 11 23:17:51 xdhuxc systemd[1]: Stopped HAProxy Load Balancer.
Jun 11 23:17:51 xdhuxc haproxy-systemd-wrapper[2135]: haproxy-systemd-wrapper: exit, haproxy RC=0
[root@xdhuxc ~]# ansible Client -m service -a &#34;name=haproxy state=restarted&#34;
192.168.91.128 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;name&#34;: &#34;haproxy&#34;,
    &#34;state&#34;: &#34;started&#34;,
    &#34;status&#34;: {
        &#34;ActiveEnterTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;ActiveExitTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;ActiveState&#34;: &#34;inactive&#34;,
        &#34;After&#34;: &#34;network.target syslog.target systemd-journald.socket basic.target system.slice&#34;,
        &#34;AllowIsolate&#34;: &#34;no&#34;,
        &#34;AmbientCapabilities&#34;: &#34;0&#34;,
        &#34;AssertResult&#34;: &#34;no&#34;,
        &#34;AssertTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;Before&#34;: &#34;shutdown.target&#34;,
        &#34;BlockIOAccounting&#34;: &#34;no&#34;,
        &#34;BlockIOWeight&#34;: &#34;18446744073709551615&#34;,
        &#34;CPUAccounting&#34;: &#34;no&#34;,
        &#34;CPUQuotaPerSecUSec&#34;: &#34;infinity&#34;,
        &#34;CPUSchedulingPolicy&#34;: &#34;0&#34;,
        &#34;CPUSchedulingPriority&#34;: &#34;0&#34;,
        &#34;CPUSchedulingResetOnFork&#34;: &#34;no&#34;,
        &#34;CPUShares&#34;: &#34;18446744073709551615&#34;,
        &#34;CanIsolate&#34;: &#34;no&#34;,
        &#34;CanReload&#34;: &#34;yes&#34;,
        &#34;CanStart&#34;: &#34;yes&#34;,
        &#34;CanStop&#34;: &#34;yes&#34;,
        &#34;CapabilityBoundingSet&#34;: &#34;18446744073709551615&#34;,
        &#34;ConditionResult&#34;: &#34;no&#34;,
        &#34;ConditionTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;Conflicts&#34;: &#34;shutdown.target&#34;,
        &#34;ControlPID&#34;: &#34;0&#34;,
        &#34;DefaultDependencies&#34;: &#34;yes&#34;,
        &#34;Delegate&#34;: &#34;no&#34;,
        &#34;Description&#34;: &#34;HAProxy Load Balancer&#34;,
        &#34;DevicePolicy&#34;: &#34;auto&#34;,
        &#34;EnvironmentFile&#34;: &#34;/etc/sysconfig/haproxy (ignore_errors=no)&#34;,
        &#34;ExecMainCode&#34;: &#34;0&#34;,
        &#34;ExecMainExitTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;ExecMainPID&#34;: &#34;0&#34;,
        &#34;ExecMainStartTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;ExecMainStatus&#34;: &#34;0&#34;,
        &#34;ExecReload&#34;: &#34;{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }&#34;,
        &#34;ExecStart&#34;: &#34;{ path=/usr/sbin/haproxy-systemd-wrapper ; argv[]=/usr/sbin/haproxy-systemd-wrapper -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid $OPTIONS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }&#34;,
        &#34;FailureAction&#34;: &#34;none&#34;,
        &#34;FileDescriptorStoreMax&#34;: &#34;0&#34;,
        &#34;FragmentPath&#34;: &#34;/usr/lib/systemd/system/haproxy.service&#34;,
        &#34;GuessMainPID&#34;: &#34;yes&#34;,
        &#34;IOScheduling&#34;: &#34;0&#34;,
        &#34;Id&#34;: &#34;haproxy.service&#34;,
        &#34;IgnoreOnIsolate&#34;: &#34;no&#34;,
        &#34;IgnoreOnSnapshot&#34;: &#34;no&#34;,
        &#34;IgnoreSIGPIPE&#34;: &#34;yes&#34;,
        &#34;InactiveEnterTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;InactiveExitTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;JobTimeoutAction&#34;: &#34;none&#34;,
        &#34;JobTimeoutUSec&#34;: &#34;0&#34;,
        &#34;KillMode&#34;: &#34;mixed&#34;,
        &#34;KillSignal&#34;: &#34;15&#34;,
        &#34;LimitAS&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitCORE&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitCPU&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitDATA&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitFSIZE&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitLOCKS&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitMEMLOCK&#34;: &#34;65536&#34;,
        &#34;LimitMSGQUEUE&#34;: &#34;819200&#34;,
        &#34;LimitNICE&#34;: &#34;0&#34;,
        &#34;LimitNOFILE&#34;: &#34;4096&#34;,
        &#34;LimitNPROC&#34;: &#34;3818&#34;,
        &#34;LimitRSS&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitRTPRIO&#34;: &#34;0&#34;,
        &#34;LimitRTTIME&#34;: &#34;18446744073709551615&#34;,
        &#34;LimitSIGPENDING&#34;: &#34;3818&#34;,
        &#34;LimitSTACK&#34;: &#34;18446744073709551615&#34;,
        &#34;LoadState&#34;: &#34;loaded&#34;,
        &#34;MainPID&#34;: &#34;0&#34;,
        &#34;MemoryAccounting&#34;: &#34;no&#34;,
        &#34;MemoryCurrent&#34;: &#34;18446744073709551615&#34;,
        &#34;MemoryLimit&#34;: &#34;18446744073709551615&#34;,
        &#34;MountFlags&#34;: &#34;0&#34;,
        &#34;Names&#34;: &#34;haproxy.service&#34;,
        &#34;NeedDaemonReload&#34;: &#34;no&#34;,
        &#34;Nice&#34;: &#34;0&#34;,
        &#34;NoNewPrivileges&#34;: &#34;no&#34;,
        &#34;NonBlocking&#34;: &#34;no&#34;,
        &#34;NotifyAccess&#34;: &#34;none&#34;,
        &#34;OOMScoreAdjust&#34;: &#34;0&#34;,
        &#34;OnFailureJobMode&#34;: &#34;replace&#34;,
        &#34;PermissionsStartOnly&#34;: &#34;no&#34;,
        &#34;PrivateDevices&#34;: &#34;no&#34;,
        &#34;PrivateNetwork&#34;: &#34;no&#34;,
        &#34;PrivateTmp&#34;: &#34;no&#34;,
        &#34;ProtectHome&#34;: &#34;no&#34;,
        &#34;ProtectSystem&#34;: &#34;no&#34;,
        &#34;RefuseManualStart&#34;: &#34;no&#34;,
        &#34;RefuseManualStop&#34;: &#34;no&#34;,
        &#34;RemainAfterExit&#34;: &#34;no&#34;,
        &#34;Requires&#34;: &#34;basic.target&#34;,
        &#34;Restart&#34;: &#34;no&#34;,
        &#34;RestartUSec&#34;: &#34;100ms&#34;,
        &#34;Result&#34;: &#34;success&#34;,
        &#34;RootDirectoryStartOnly&#34;: &#34;no&#34;,
        &#34;RuntimeDirectoryMode&#34;: &#34;0755&#34;,
        &#34;SameProcessGroup&#34;: &#34;no&#34;,
        &#34;SecureBits&#34;: &#34;0&#34;,
        &#34;SendSIGHUP&#34;: &#34;no&#34;,
        &#34;SendSIGKILL&#34;: &#34;yes&#34;,
        &#34;Slice&#34;: &#34;system.slice&#34;,
        &#34;StandardError&#34;: &#34;inherit&#34;,
        &#34;StandardInput&#34;: &#34;null&#34;,
        &#34;StandardOutput&#34;: &#34;journal&#34;,
        &#34;StartLimitAction&#34;: &#34;none&#34;,
        &#34;StartLimitBurst&#34;: &#34;5&#34;,
        &#34;StartLimitInterval&#34;: &#34;10000000&#34;,
        &#34;StartupBlockIOWeight&#34;: &#34;18446744073709551615&#34;,
        &#34;StartupCPUShares&#34;: &#34;18446744073709551615&#34;,
        &#34;StatusErrno&#34;: &#34;0&#34;,
        &#34;StopWhenUnneeded&#34;: &#34;no&#34;,
        &#34;SubState&#34;: &#34;dead&#34;,
        &#34;SyslogLevelPrefix&#34;: &#34;yes&#34;,
        &#34;SyslogPriority&#34;: &#34;30&#34;,
        &#34;SystemCallErrorNumber&#34;: &#34;0&#34;,
        &#34;TTYReset&#34;: &#34;no&#34;,
        &#34;TTYVHangup&#34;: &#34;no&#34;,
        &#34;TTYVTDisallocate&#34;: &#34;no&#34;,
        &#34;TasksAccounting&#34;: &#34;no&#34;,
        &#34;TasksCurrent&#34;: &#34;18446744073709551615&#34;,
        &#34;TasksMax&#34;: &#34;18446744073709551615&#34;,
        &#34;TimeoutStartUSec&#34;: &#34;1min 30s&#34;,
        &#34;TimeoutStopUSec&#34;: &#34;1min 30s&#34;,
        &#34;TimerSlackNSec&#34;: &#34;50000&#34;,
        &#34;Transient&#34;: &#34;no&#34;,
        &#34;Type&#34;: &#34;simple&#34;,
        &#34;UMask&#34;: &#34;0022&#34;,
        &#34;UnitFilePreset&#34;: &#34;disabled&#34;,
        &#34;UnitFileState&#34;: &#34;disabled&#34;,
        &#34;Wants&#34;: &#34;system.slice&#34;,
        &#34;WatchdogTimestampMonotonic&#34;: &#34;0&#34;,
        &#34;WatchdogUSec&#34;: &#34;0&#34;
    }
}
[root@xdhuxc ~]# systemctl status haproxy
● haproxy.service - HAProxy Load Balancer
   Loaded: loaded (/usr/lib/systemd/system/haproxy.service; disabled; vendor preset: disabled)
   Active: active (running) since Mon 2018-06-11 23:19:46 CST; 25s ago
 Main PID: 2351 (haproxy-systemd)
   Memory: 1.9M
   CGroup: /system.slice/haproxy.service
           ├─2351 /usr/sbin/haproxy-systemd-wrapper -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid
           ├─2354 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds
           └─2355 /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds

Jun 11 23:19:46 xdhuxc systemd[1]: Started HAProxy Load Balancer.
Jun 11 23:19:46 xdhuxc systemd[1]: Starting HAProxy Load Balancer...
Jun 11 23:19:46 xdhuxc haproxy-systemd-wrapper[2351]: haproxy-systemd-wrapper: executing /usr/sbin/haproxy -f /etc/haproxy/haproxy.cfg -p /run/haproxy.pid -Ds
</code></pre></td></tr></table>
</div>
</div><h5 id="user-模块">user 模块</h5>
<p>user 模块用来进行远程主机用户的管理。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ansible Client -m user -a &#34;name=wang comment=&#39;user wang&#39;&#34;     # 创建用户 wang
ansible Client -m user -a &#34;name=wang state=absent remove=yes&#34; # 删除用户 wang
</code></pre></td></tr></table>
</div>
</div><p>执行命令结果如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[root@xdhuxc ~]# cat /etc/passwd | grep wang
[root@xdhuxc ~]# ansible Client -m user -a &#34;name=wang comment=&#39;user wang&#39;&#34;     # 创建用户 wang
192.168.91.128 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;comment&#34;: &#34;user wang&#34;,
    &#34;create_home&#34;: true,
    &#34;group&#34;: 1001,
    &#34;home&#34;: &#34;/home/wang&#34;,
    &#34;name&#34;: &#34;wang&#34;,
    &#34;shell&#34;: &#34;/bin/bash&#34;,
    &#34;state&#34;: &#34;present&#34;,
    &#34;system&#34;: false,
    &#34;uid&#34;: 1001
}
[root@xdhuxc ~]# cat /etc/passwd | grep wang
wang❌1001:1001:user wang:/home/wang:/bin/bash
[root@xdhuxc ~]# ansible Client -m user -a &#34;name=wang state=absent remove=yes&#34;  # 删除用户 wang
192.168.91.128 | SUCCESS =&gt; {
    &#34;changed&#34;: true,
    &#34;force&#34;: false,
    &#34;name&#34;: &#34;wang&#34;,
    &#34;remove&#34;: true,
    &#34;state&#34;: &#34;absent&#34;
}
[root@xdhuxc ~]# cat /etc/passwd | grep wang
[root@xdhuxc ~]#
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">xdhuxc</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2018-05-02
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ansible/">Ansible</a>
          <a href="/tags/devops/">DevOps</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/message/rabbitmq/rabbitmq-common-command/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">RabbitMQ 常用命令总结</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/programming/python/python-code-example/">
            <span class="next-text nav-default">Python 常用代码示例</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:xdhuxc@163.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/xdhuxc" class="iconfont icon-github" title="github"></a>
  <a href="https://xdhuxc.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">xdhuxc 版权所有</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-139962821-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
