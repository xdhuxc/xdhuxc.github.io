<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Linux 中 systemd 的使用 - xdhuxc</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="xdhuxc" /><meta name="description" content="本篇博客介绍下 Linux 下 服务管理工具 systemd 的使用。
" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.62.2 with theme even" />


<link rel="canonical" href="https://xdhuxc.github.io/post/linux/linux-systemd/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Linux 中 systemd 的使用" />
<meta property="og:description" content="本篇博客介绍下 Linux 下 服务管理工具 systemd 的使用。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xdhuxc.github.io/post/linux/linux-systemd/" />
<meta property="article:published_time" content="2018-10-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-12-09T00:00:00+00:00" />
<meta itemprop="name" content="Linux 中 systemd 的使用">
<meta itemprop="description" content="本篇博客介绍下 Linux 下 服务管理工具 systemd 的使用。">
<meta itemprop="datePublished" content="2018-10-23T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-09T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="4257">



<meta itemprop="keywords" content="Linux,systemd," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux 中 systemd 的使用"/>
<meta name="twitter:description" content="本篇博客介绍下 Linux 下 服务管理工具 systemd 的使用。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Xdhuxc</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">博客</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">目录</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Xdhuxc</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">博客</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">目录</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Linux 中 systemd 的使用</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-10-23 </span>
        <div class="post-category">
            <a href="/categories/%E6%8A%80%E6%9C%AF/"> 技术 </a>
            </div>
          <span class="more-meta"> 约 4257 字 </span>
          <span class="more-meta"> 预计阅读 9 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#systemd-service">systemd service</a></li>
        <li><a href="#systemd">systemd</a></li>
        <li><a href="#systemd-常用命令">systemd 常用命令</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>本篇博客介绍下 Linux 下 服务管理工具 systemd 的使用。</p>
<h3 id="systemd-service">systemd service</h3>
<p>一种以 <code>.service</code> 结尾的单元（unit）配置文件，用于控制由systemd控制或监视的进程。简单来说，用于在后台以守护进程的方式运行程序。</p>
<p>其基本特征有：</p>
<ul>
<li>支持并行化任务</li>
<li>同时采用 <code>socket</code> 式与 <code>D-Bus</code> 总线式激活服务</li>
<li>按需启动守护进程（daemon）</li>
<li>利用 <code>linux</code> 的 <code>cgroups</code> 监视进程</li>
<li>支持快照和系统恢复</li>
<li>维护挂载点和自动挂载点</li>
<li>各服务间基于依赖关系进行精密控制</li>
</ul>
<h3 id="systemd">systemd</h3>
<h4 id="基本结构">基本结构</h4>
<p>systemd 服务的主要内容分为三个部分：</p>
<ul>
<li>控制单元的定义</li>
<li>服务的定义</li>
<li>安装部分</li>
</ul>
<h4 id="说明">说明</h4>
<p>1、<code>systemd</code> 单元文件中的以 <code>#</code> 开头的行后面的内容会被认为是注释。</p>
<p>2、<code>systemd</code> 下的布尔值：<code>1</code>、<code>yes</code>、<code>on</code>、<code>rue</code> 都是开启；<code>0</code>、<code>no</code>、<code>off</code>、<code>false</code> 都是关闭，仅限于 <code>systemd</code> 文件，不适用于该文件中嵌入的 <code>shell</code> 语句。</p>
<p>3、<code>systemd</code> 下的时间单位默认是秒，因此，使用毫秒，分钟时要显式说明。</p>
<h4 id="示例说明">示例说明</h4>
<p>以如下service文件为示例进行语法说明</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Unit]
Description=Network Manager
After=syslog.target
Wants=remote-fs.target network.target

[Service]
Type=dbus
BusName=org.freedesktop.NetworkManager
ExecStart=/usr/sbin/NetworkManager --no-daemon
EnvironmentFile=/etc/sysconfig/network/config
ExecStartPre=/usr/bin/test &#34;x${NETWORKMANAGER}&#34; = xyes
<span class="gh"># Suppress stderr to eliminate duplicated messages in syslog. NM calls openlog()
</span><span class="gh"></span><span class="gh"># with LOG_PERROR when run in foreground. But systemd redirects stderr to
</span><span class="gh"></span><span class="gh"># syslog by default, which results in logging each message twice.
</span><span class="gh"></span>StandardError=null

[Install]
WantedBy=multi-user.target
Also=NetworkManager-wait-online.service
</code></pre></td></tr></table>
</div>
</div><h4 id="定义控制单元">定义控制单元</h4>
<p>在 <code>systemd</code> 中，所有引导过程中 <code>systemd</code> 要控制的东西都是一个单元。<code>systemd</code> 的单元类型有：</p>
<ul>
<li>系统服务（.service）</li>
<li>套接字（.sockets）</li>
<li>设备（.device）</li>
<li>挂载点（.mount）</li>
<li>自动挂载点（）</li>
<li>交换分区（.swap）</li>
<li>分区（）</li>
<li>启动对象（.target）</li>
<li>文件系统路径（.path）</li>
<li>定时器（）</li>
</ul>
<p>单元名即 <code>.service</code> 文件的名称。但不只有 <code>.service</code> 后缀的文件才可以是一个 单元，单元还可以有 <code>.target</code>, <code>.path</code>等后缀，具体可以在 <code>/usr/lib/systemd/system</code> 下了解。但这些后缀要么由 systemd 上游开发者写好随 systemd 软件包分发，要么由 Base:system 团队添加，一般用户是不太需要写其它后缀的控制单元的。</p>
<p>单元文件可以从两个地方进行加载，优先级从低到高分别是：</p>
<ul>
<li>/usr/lib/systemd/system/ ：软件包安装的单元</li>
<li>/etc/systemd/system/ ：系统管理员安装的单元</li>
</ul>
<p>1）声明我们在定义控制单元，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Unit]
</code></pre></td></tr></table>
</div>
</div><p>2）添加单元描述，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Unit]
Description=Daemon to start He.net IPv6
</code></pre></td></tr></table>
</div>
</div><p>3）systemd对各个单元之间关系的控制：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Unit]
Description=Daemon to start He.net IPv6
Wants=network-online.target
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>Requires，当前单元启动了，那么它所需要的单元也会被启动；当前单元需要的单元被停止了，那么它自己也活不了。但是请注意，这个设定并不能控制某单元与其所需要的单元的启动顺序（启动顺序是另外控制的），即 systemd 不是先启动本单元所需要的单元，再启动本单元，而是在本单元被激活时，并行启动两者，因此会产生争分夺秒的问题。如果当前单元所需要的单元先启动成功，那么皆大欢喜; 如果当前单元所需要的单元启动得慢，那么本单元就会启动失败（systemd 没有自动重试）。因此，为了系统的健壮性，不建议使用这个标记，而建议使用 Wants 标记。可以使用多个 Requires。</p>
</li>
<li>
<p>RequiresOverridable：跟 Requires 很像。但是如果这条服务是由用户手动启 动的，那么 RequiresOverridable 后面的服务即使启动不成功也不报错。跟 Requires 比增加了一定的容错性，但是你要确定你的服务是有等待功能的。另外，如果不由用户手动启动而是随系统开机启动，那么依然会有 Requires 面临的问题.</p>
</li>
<li>
<p>Requisite：强势版本的Requires，要是这里需要的服务启动不成功，那本单元文件不管能不能检测，等不能等待都会立刻就失败。</p>
</li>
<li>
<p>Wants：推荐使用。本单元启动了，它所需要的单元也会被启动，如果启动不成功，对本单元没有影响。</p>
</li>
<li>
<p>Conflicts：一个单元的启动会停止与它冲突的单元，反之亦然。注意这里和后面的启动顺序是“正交”的：
两个相互冲突的单元被同时启动，要么两个都启动不了（两者都是第三个单元的 Requires），要么启动一个（有一个是第三个单元的Requires，另一个不是），不是 Requires 的那个会被停止。要是两者都不是任何一个单元的Requires，那么 Conflicts 别的那个单元优先启动，被Conflicts的后启动，要是互相写了，那么两个都启动不了。</p>
</li>
<li>
<p>OnFailure：很明显，如果本单元启动失败了，那么启动什么单元作为折衷。
我们的单元，Ipv6 隧道，应该想要什么呢？很显然是一个连通着的网络。有一个 systemd 默认提供的对象叫做 network-online.target（默认的 target 列表可见 <a href="https://www.freedesktop.org/software/systemd/man/systemd.special.html">systemd.special</a>，因为你大多数时候Wants的都是一个固定的系统状态而不是其它 systemd服务），正好能够提供我们需要的环境。</p>
</li>
</ul>
<p>4）定义服务启动顺序</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Unit]
Description=Daemon to start He.net IPv6
Wants=network-online.target
After=network.target
</code></pre></td></tr></table>
</div>
</div><p>systemd 服务启动顺序主要使用以下两个标记定义的：</p>
<p>Before/After：要是一个服务在另一个服务之前启动，那么在并行启动时（systemd 总是用进程 0 并行启动所有东西，然后通过这两个标记来二次等待排序），另一个服务这时就会等这个服务先启动并返回状态，注意是先启动，而不是先启动成功，因为失败也是一种状态，一定要成功才启动另一个服务是通过依赖关系定义的。反之 After 亦然。</p>
<p><code>关机</code>（可以是挂起，这时候有些服务依然在运行，比如网络唤醒等）时候的顺序：如果两个服务都是要关掉的，Before 是先停止自己，After 是先停止别人； 但如果一个服务要停止，而另一个服务要启动，那么不管 Before/After 如何写，总是优先关闭而不是开始。也就是比如服务 A Before 服务 B，但是服务 B 是在关，而服务 A 是在 restart，那么服务 B 的顺序在服务 A 的前面。</p>
<p>我们的单元应该在什么服务的前后启动呢？它不需要一定在什么服务前面跑起来，这不像 ifup 和 dhcp，网络起不来获取 ip 肯定没用。我们只需要有网就可以了。<code>有网</code> 在 systemd 中也是由一个默认 <code>target：network.target</code> 提供的，</p>
<h4 id="定义服务本体">定义服务本体</h4>
<p>1）声明服务本体，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Service]
</code></pre></td></tr></table>
</div>
</div><p>2）声明服务的类型，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Service]
Type=
</code></pre></td></tr></table>
</div>
</div><p>systemd 支持的服务类型有以下几类：</p>
<ul>
<li>
<p>simple， 默认服务类型，最简单的服务类型。就是说启动的程序就是主体程序，该程序要是退出，那么一切皆休。这在图形界面里非常好理解，用户打开一个窗口，退出它就没有了。但是命令行中的大部分程序都不会这样设计，因为命令行程序的一个最基本的原则就是：一个好的程序不能独占命令行窗口。因此，输入命令，回车，接着马上返回提示符，但程序已经执行了。在这种类型下，如果主程序是要响应其它程序的，那么你的通信频道应该在启动本服务前就设好（套接字等），因此这种类型的服务，Systemd 运行它后会立刻就运行下面的服务（需要它的服务），这时没有套接字后面的服务会失败，写 After 也没用，因为 simple 类型不存在主进程退出的情况，也就不存在有返回状态的情况，所以它一旦启动就认为是成功的，除非没起来。</p>
</li>
<li>
<p>forking，标准 Unix Daemon 使用的启动方式。启动程序后会调用 fork() 函数，把必要的通信频道都设置好之后父进程退出，留下守护进程的子进程。使用这种方式，最好也指定下 PIDFILE=，不要让 systemd 去猜，非要猜也可以，把 GuessMainPID 设为 yes。</p>
<p><code>判断是 forking 还是 simple 类型非常简单，命令行里运行下程序，持续占用命令行要按 Ctrl + C 才可以的，就不会是 forking 类型。</code></p>
<p><code>创建 PIDFILE 是为它写服务的程序的任务，而不是 systemd 的功能，甚至也不是 SysV init 脚本的功能。因此，如果你的程序确实是 forking 类型，但没有实现创建 PIDFILE 的功能，那么建议使用 ExecStartPost= 结合 shell 命令来手动抓取进程编号并写到 /var/run/xxx.pid文件中。</code></p>
</li>
<li>
<p>oneshot，一次性的，这种服务类型就是启动，完成，没进程了。常见的，比如设置网络，ifup eth0 up，就是一次性的，不存在 ifup 的子进程，也不存在主进程，运行完成后便了无痕迹。由于这类服务运行完就没有进程了，我们经常会需要 <code>RemainAfterExit=yes</code>。后面配置的意思是说，即使没进程了, systemd 也认为该服务是存在并成功了。所以如果你有一个这样的服务，服务启动后，你再去 ifup eth0 up，这时你再看服务，依然显示是 running 的。因为只要在执行那条一次性命令的时候没出错，那么它就永远认为它是成功并一直存在的，直到你关闭服务。</p>
</li>
<li>
<p>dbus，程序启动时需要获取一块 DBus 空间，所以需要和 BusName= 一起使用。只有它成功获得了 DBus 空间，依赖它的程序才会被启动。</p>
</li>
</ul>
<p>一般情况下，只能用到上面四个，还有两种少见的类型：</p>
<ul>
<li>
<p>notify， 程序在启动完成后会通过 sd_notify 发送一个通知消息。所以还需要配合 NotifyAccess 来让 systemd 接收消息，后者有三个级别：none，所有消息都忽略掉; main，只接受程序的主进程发过去的消息; all，程序的所有进程发过去的消息都算。NotifyAccess 要是不写的话，默认是 main。</p>
</li>
<li>
<p>idle，程序要等它里面调度的全部其它东西都运行完才会运行它自己。比如你 ExecStart 的是个 shell 脚本，里面可能运行了一些别的东西，如果不这样的话，那很可能别的东西的控制台输出里会多一个“启动成功”这样的 systemd 消息。</p>
</li>
</ul>
<p>由于 He.net 的 IPv6 是用 iproute2 的 ip 命令来弄的，所以是一个 oneshot 一次性服务。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Service]
Type=oneshot
RemainAfterExit=yes
</code></pre></td></tr></table>
</div>
</div><p>接下来要设置 ExecStart, ExecStop。如果程序支持的话，还可以去设置 ExecReload，Restart 等。注意，这里设置的是它们 Reload/Restart 的方式，但并不代表没有它们， systemd 就不能完成比如 <code>systemctl restart xxx.service</code> 这样的任务，程序有支持自然最好，程序不支持那就先 stop 再 start。同样，有特殊要求的时候也可以去设置比如 ExecStartPre，ExecStartPost，RestartSec，TimeoutSec 等其它东西。</p>
<p>这里要特殊讲一下 ExecStart：</p>
<p>如果你服务的类型不是 <code>oneshot</code> ，那么它只可以接受一个命令，参数不限，比如你先 <code>ip tunnel create</code> 再 <code>ip tunnel0 up</code>，那是两个 ip 命令，如果不是 <code>oneshot</code> 类型这样是不行的。
如果有多条命令（oneshot 类型），命令之间以分号 <code>;</code> 分隔，跨行可用反斜杠 <code>\</code>。除非你的服务类型是 <code>forking</code> ，否则在这里输入的命令都会被认为是主进程，不管它是不是。</p>
<h4 id="安装服务">安装服务</h4>
<p>这里说的 <code>安装</code> 是一种内部状态，默认放对service文件位置，显示的是 disabled，unloaded，因此要在 systemd 内部对它进行加载，没人需要的东西是不需要安装的，所以要告诉 systemd 它是有人需要的，被谁需要。一般都是被需要的（<code>multi-user.target</code> 表示多用户系统，简单理解就是你可以登入了）。这样在 <code>multi-user.target</code> 启用时，我们的服务也就会被启用了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">[Install]
WantedBy=multi-user.target
</code></pre></td></tr></table>
</div>
</div><p>[Install] 部分下除了 WantedBy 还有两种属性，分别是：</p>
<p><code>Alias=</code> ，别名，这样 <code>systemctl command xxx.service</code> 的时候就可以不输入完整的单元名称。比如你给 <code>NetworkManager</code> 取一个别名叫 <code>Alias=nm</code>，那就可以 <code>systemctl status nm.service</code> 查看实际是 <code>NetworkManager.service</code> 的服务了。
<code>Also=</code> ，安装本服务的时候还要安装别的什么服务。比如我们的 He.net 脚本按理应该需要一个 <code>iproute2.service</code> 作为 also，但是 iproute2 实际上不需要 systemd 控制，所以就没写。它和 [Unit] 定义里面的依赖关系相比，它管理的不是运行时依赖，而是安装时。安装好了之后启动谁先谁后，谁依赖谁，和 <code>Also=</code> 都没有关系。</p>
<h3 id="systemd-常用命令">systemd 常用命令</h3>
<p>1、检查docker服务环境变量是否加载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">systemctl show docker --property Environment
</code></pre></td></tr></table>
</div>
</div><p>2、异步启动服务</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">systemctl --no-block start etcd
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">xdhuxc</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2018-12-09
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/linux/">Linux</a>
          <a href="/tags/systemd/">systemd</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/programming/java/java-springboot-jmx/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">SpringBoot 应用启动报错，Unregistering JMX-exposed beans on shutdown</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/storage/etcd/etcd-command/">
            <span class="next-text nav-default">etcd 常用命令和 API 总结</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:xdhuxc@163.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/xdhuxc" class="iconfont icon-github" title="github"></a>
  <a href="https://xdhuxc.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2017 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">xdhuxc 版权所有</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-139962821-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
